<html layout:decorate="~{global/layout}">
<div layout:fragment="content" class="mx-2 overflow-x-auto w-full">

    <div class="container mx-auto p-4">
        <h2 class="text-2xl font-bold mb-4">Posts by <span th:text="${username}"></span></h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <!-- 각각의 카드 -->
            <div th:each="post : ${paging}" class="card w-96 bg-base-100 shadow-xl w-full">
                <div class="card-body">
                    <div>
                        <span th:if="${post.isPremium}">[M] </span>
                        <span th:if="${post.isPublished()}"><i class="fas fa-lock"></i> </span>
                        <span th:unless="${post.isPremium and not @rq.isPremium()}" class="text-info-content">
                        <h2 class="card-title" th:text="${post.title}"></h2>
                        </span>
                        <span th:if="${post.isPremium and not @rq.isPremium()}">멤버십 회원만 열람 가능 한 글 입니다.</span>

                    </div>

                    <div class="card-actions justify-end">
                        <a th:unless="${post.isPublished() and (@rq.getMember()!=post.getAuthor()) or (post.isPremium() and not @rq.isPremium())}"
                           th:href="@{|/b/${post.author.username}/${post.id}|}" class="btn btn-primary">글 보기</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 페이징처리 시작 -->
    <div class="join w-full flex justify-center my-2">
        <a class="join-item btn" th:classappend="${paging.number < 5} ? 'disabled' : ''"
           th:if="${paging.number >= 5}" th:href="@{|?page=${(paging.number/5 > 0) ? (paging.number-5) : 0}|}">
            <span>이전</span>
        </a>

        <span th:each="page: ${#numbers.sequence(0, paging.totalPages-1)}"
              th:if="${page >= (paging.number/5)*5 and page < ((paging.number/5)+1)*5}">
            <a th:if="${page == paging.number}"
               th:class="${'join-item btn btn-active'}"
               th:text="${page + 1}"></a>
            <a th:unless="${page == paging.number}"
               th:class="${'join-item btn'}"
               th:text="${page + 1}" th:href="@{|?page=${page}|}"></a>
        </span>

        <a class="join-item btn"
           th:classappend="${paging.number + 5 >= paging.totalPages} ? 'disabled' : ''"
           th:if="${paging.totalPages > 5 and (paging.number / 5 < (paging.totalPages - 1) / 5)}"
           th:href="@{|?page=${(paging.number / 5 + 1) * 5}|}">
            <span>다음</span>
        </a>
    </div>
    <!-- 페이징처리 끝 -->


</div>
</html>